{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let CustomerComponent = class CustomerComponent {\n  constructor(customerService, messageService, confirmationService) {\n    this.customerService = customerService;\n    this.messageService = messageService;\n    this.confirmationService = confirmationService;\n    this.isVisible = true;\n    this.customer = {};\n    this.customers = [];\n  }\n  ngOnInit() {\n    this.getCustomers();\n  }\n  getCustomers() {\n    this.customerService.getCustomers().subscribe({\n      next: data => {\n        this.customers = data;\n        console.log(this.customers);\n      }\n    });\n  }\n  showSuccess(msg) {\n    this.messageService.add({\n      severity: 'success',\n      summary: 'Success',\n      detail: msg\n    });\n  }\n  showError(msg) {\n    this.messageService.add({\n      severity: 'error',\n      summary: 'Error',\n      detail: msg\n    });\n  }\n  saveCustomer(request) {\n    this.customerService.saveCustomer(request).subscribe({\n      //use next if you want to do something after the request was made or need data from request\n      next: () => {\n        this.getCustomers();\n        this.isVisible = false;\n        this.showSuccess(\"Customer: \" + this.customer.name + \" has been saved\");\n        this.customer = {};\n      },\n      error: err => {\n        this.showError(\"Customer has not been saved\");\n      }\n    });\n  }\n  deleteCustomer(id) {\n    if (id) {\n      this.customerService.deleteCustomer(id).subscribe({\n        next: () => {\n          this.showSuccess(\"Customer: \" + id + \" has been deleted\");\n          this.customerService.getCustomers();\n        }\n      });\n    }\n  }\n};\nCustomerComponent = __decorate([Component({\n  selector: 'app-customer',\n  templateUrl: './customer.component.html',\n  styleUrls: ['./customer.component.scss']\n})], CustomerComponent);","map":{"version":3,"names":["Component","CustomerComponent","constructor","customerService","messageService","confirmationService","isVisible","customer","customers","ngOnInit","getCustomers","subscribe","next","data","console","log","showSuccess","msg","add","severity","summary","detail","showError","saveCustomer","request","name","error","err","deleteCustomer","id","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\anazj\\OneDrive\\Desktop\\simpleapi\\frontend\\angular\\src\\app\\components\\customer\\customer.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport CustomerDTO from './CustomerDTO';\nimport { CustomerService } from 'src/app/services/customer/customer.service';\nimport CustomerRegistrationRequest from 'src/app/models/CustomerRegistrationRequest';\nimport { MessageService } from 'primeng/api';\n\n@Component({\n  selector: 'app-customer',\n  templateUrl: './customer.component.html',\n  styleUrls: ['./customer.component.scss']\n})\nexport class CustomerComponent implements OnInit {\n\n  isVisible: boolean = true;\n\n  customer: CustomerRegistrationRequest = {};\n\n  customers: Array<CustomerDTO> = [];\n\n  constructor(private customerService: CustomerService, private messageService: MessageService, private confirmationService: ConfirmationService){};\n\n  ngOnInit(): void {\n    this.getCustomers();\n  }\n\n  private getCustomers(): void {\n      this.customerService.getCustomers()\n        .subscribe(\n          {\n            next: (data: CustomerDTO[])=>\n            {\n              \n              this.customers=data;\n              console.log(this.customers);\n            }\n          })\n  }\n\n  private showSuccess(msg: string) \n  {\n    this.messageService.add({ severity: 'success', summary: 'Success', detail: msg });\n  }\n\n  private showError(msg: string) \n  {\n    this.messageService.add({ severity: 'error', summary: 'Error', detail: msg });\n  }\n\n  saveCustomer(request: CustomerRegistrationRequest): void\n  {\n    this.customerService.saveCustomer(request)\n    .subscribe({\n      //use next if you want to do something after the request was made or need data from request\n      next: ()=>\n      {\n        this.getCustomers();\n        this.isVisible=false;\n        this.showSuccess(\"Customer: \"+this.customer.name+\" has been saved\");\n        this.customer={};\n        \n\n      },\n\n      error:(err)=>\n      {\n        this.showError(\"Customer has not been saved\")\n      }\n    })\n\n  }\n\n  deleteCustomer(id: number):void\n  {\n    if(id)\n    {\n      this.customerService.deleteCustomer(id)\n      .subscribe({\n          next: ()=>\n          {\n            this.showSuccess(\"Customer: \"+id+\" has been deleted\");\n            this.customerService.getCustomers();\n          }\n      });\n\n    }\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAY1C,WAAMC,iBAAiB,GAAvB,MAAMA,iBAAiB;EAQ5BC,YAAoBC,eAAgC,EAAUC,cAA8B,EAAUC,mBAAwC;IAA1H,KAAAF,eAAe,GAAfA,eAAe;IAA2B,KAAAC,cAAc,GAAdA,cAAc;IAA0B,KAAAC,mBAAmB,GAAnBA,mBAAmB;IANzH,KAAAC,SAAS,GAAY,IAAI;IAEzB,KAAAC,QAAQ,GAAgC,EAAE;IAE1C,KAAAC,SAAS,GAAuB,EAAE;EAE8G;EAEhJC,QAAQA,CAAA;IACN,IAAI,CAACC,YAAY,EAAE;EACrB;EAEQA,YAAYA,CAAA;IAChB,IAAI,CAACP,eAAe,CAACO,YAAY,EAAE,CAChCC,SAAS,CACR;MACEC,IAAI,EAAGC,IAAmB,IAAG;QAG3B,IAAI,CAACL,SAAS,GAACK,IAAI;QACnBC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACP,SAAS,CAAC;MAC7B;KACD,CAAC;EACV;EAEQQ,WAAWA,CAACC,GAAW;IAE7B,IAAI,CAACb,cAAc,CAACc,GAAG,CAAC;MAAEC,QAAQ,EAAE,SAAS;MAAEC,OAAO,EAAE,SAAS;MAAEC,MAAM,EAAEJ;IAAG,CAAE,CAAC;EACnF;EAEQK,SAASA,CAACL,GAAW;IAE3B,IAAI,CAACb,cAAc,CAACc,GAAG,CAAC;MAAEC,QAAQ,EAAE,OAAO;MAAEC,OAAO,EAAE,OAAO;MAAEC,MAAM,EAAEJ;IAAG,CAAE,CAAC;EAC/E;EAEAM,YAAYA,CAACC,OAAoC;IAE/C,IAAI,CAACrB,eAAe,CAACoB,YAAY,CAACC,OAAO,CAAC,CACzCb,SAAS,CAAC;MACT;MACAC,IAAI,EAAEA,CAAA,KAAI;QAER,IAAI,CAACF,YAAY,EAAE;QACnB,IAAI,CAACJ,SAAS,GAAC,KAAK;QACpB,IAAI,CAACU,WAAW,CAAC,YAAY,GAAC,IAAI,CAACT,QAAQ,CAACkB,IAAI,GAAC,iBAAiB,CAAC;QACnE,IAAI,CAAClB,QAAQ,GAAC,EAAE;MAGlB,CAAC;MAEDmB,KAAK,EAAEC,GAAG,IAAG;QAEX,IAAI,CAACL,SAAS,CAAC,6BAA6B,CAAC;MAC/C;KACD,CAAC;EAEJ;EAEAM,cAAcA,CAACC,EAAU;IAEvB,IAAGA,EAAE,EACL;MACE,IAAI,CAAC1B,eAAe,CAACyB,cAAc,CAACC,EAAE,CAAC,CACtClB,SAAS,CAAC;QACPC,IAAI,EAAEA,CAAA,KAAI;UAER,IAAI,CAACI,WAAW,CAAC,YAAY,GAACa,EAAE,GAAC,mBAAmB,CAAC;UACrD,IAAI,CAAC1B,eAAe,CAACO,YAAY,EAAE;QACrC;OACH,CAAC;;EAGN;CACD;AA3EYT,iBAAiB,GAAA6B,UAAA,EAL7B9B,SAAS,CAAC;EACT+B,QAAQ,EAAE,cAAc;EACxBC,WAAW,EAAE,2BAA2B;EACxCC,SAAS,EAAE,CAAC,2BAA2B;CACxC,CAAC,C,EACWhC,iBAAiB,CA2E7B"},"metadata":{},"sourceType":"module","externalDependencies":[]}